{% extends "base.html" %}

{% block title %}ê²½ì œ ë‰´ìŠ¤ ë¸Œë¦¬í•‘ - {{ data.video_date }}{% endblock %}
{% block description %}{{ data.video_date }} ê²½ì œ ë‰´ìŠ¤ AI ë¶„ì„ ë¸Œë¦¬í•‘{% endblock %}

{% block content %}
<!-- íˆì–´ë¡œ ì„¹ì…˜ -->
<div class="gradient-bg rounded-2xl p-6 mb-6 text-white animate-fade-in-up">
    <div class="flex items-center gap-2 mb-2">
        <span class="bg-white/20 text-xs font-semibold px-2.5 py-1 rounded-full">ğŸ“… {{ data.video_date }}</span>
        <span class="bg-white/20 text-xs font-semibold px-2.5 py-1 rounded-full">{% if data._mode == 'evening' %}ğŸŒ‡
            í‡´ê·¼ìš”ì •{% else %}â˜€ï¸ ëª¨ë‹ë£¨í‹´{% endif %}ë¸Œë¦¬í•‘</span>
        <span class="bg-white/20 text-xs font-semibold px-2.5 py-1 rounded-full">LATEST</span>
    </div>
    <h1 class="text-xl md:text-2xl font-bold mt-3 leading-tight">{{ data.video_title }}</h1>
    <a href="{{ data.video_url }}" target="_blank"
        class="inline-flex items-center gap-1.5 mt-4 bg-white/20 hover:bg-white/30 text-white text-sm font-medium px-4 py-2 rounded-xl transition-colors no-underline">
        â–¶ï¸ ì˜ìƒ ë³´ê¸°
    </a>
</div>

<!-- ìƒì„¸ ì›¹ ë¦¬í¬íŠ¸ -->
{% if web_report_html %}
<div class="bg-white rounded-xl border border-surface-200 p-5 md:p-6 mb-6 animate-fade-in-up animate-delay-1">
    <h2 class="text-base font-bold text-slate-800 mb-4 flex items-center gap-1.5 pb-3 border-b border-surface-200">
        ğŸ“‹ ìƒì„¸ ë¶„ì„ ë¦¬í¬íŠ¸
    </h2>
    <div class="prose-report text-sm">
        {{ web_report_html | safe }}
    </div>
</div>
{% endif %}

<!-- í•µì‹¬ ì¸ì‚¬ì´íŠ¸ -->
{% if data.key_insights %}
<div class="bg-amber-50 border border-amber-200 rounded-xl p-5 mb-6 animate-fade-in-up animate-delay-2">
    <h2 class="text-sm font-bold text-amber-800 mb-3 flex items-center gap-1.5">
        ğŸ’¡ í•µì‹¬ ì¸ì‚¬ì´íŠ¸
    </h2>
    <ul class="space-y-2">
        {% for insight in data.key_insights %}
        <li class="flex items-start gap-2 text-sm text-amber-900 leading-relaxed">
            <span class="text-amber-500 mt-0.5 flex-shrink-0">â–¸</span>
            <span>{{ insight }}</span>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<!-- ìµœê·¼ ìš”ì•½ ë¯¸ë‹ˆ ë¦¬ìŠ¤íŠ¸ (ëª¨ë“œë³„ ë¶„ë¦¬ í‘œì‹œ) -->
{% if recent_list %}
<div class="bg-white rounded-xl border border-surface-200 p-5 mb-6">
    <h2 class="text-base font-bold text-slate-800 mb-4 flex items-center gap-1.5">
        ğŸ• ìµœê·¼ ë¸Œë¦¬í•‘ ëª¨ì•„ë³´ê¸°
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {% set morning_latest = none %}
        {% set evening_latest = none %}

        {% for item in recent_list %}
        {% if item._mode == 'morning' and not morning_latest %}
        {% set morning_latest = item %}
        {% elif item._mode == 'evening' and not evening_latest %}
        {% set evening_latest = item %}
        {% endif %}
        {% endfor %}

        {% if morning_latest %}
        <a href="reports/morning/{{ morning_latest._date }}.html"
            class="block p-4 rounded-xl border border-primary-100 bg-primary-50/30 hover:bg-primary-50 transition-colors no-underline group">
            <div class="text-xs font-bold text-primary-600 mb-1">â˜€ï¸ ìµœê·¼ ëª¨ë‹ë£¨í‹´</div>
            <div class="text-sm font-bold text-slate-800 group-hover:text-primary-700 truncate">{{
                morning_latest.video_title }}</div>
            <div class="text-[10px] text-slate-400 mt-1">{{ morning_latest._date }}</div>
        </a>
        {% endif %}

        {% if evening_latest %}
        <a href="reports/evening/{{ evening_latest._date }}.html"
            class="block p-4 rounded-xl border border-amber-100 bg-amber-50/30 hover:bg-amber-50 transition-colors no-underline group">
            <div class="text-xs font-bold text-amber-600 mb-1">ğŸŒ‡ ìµœê·¼ í‡´ê·¼ìš”ì •</div>
            <div class="text-sm font-bold text-slate-800 group-hover:text-amber-700 truncate">{{
                evening_latest.video_title }}</div>
            <div class="text-[10px] text-slate-400 mt-1">{{ evening_latest._date }}</div>
        </a>
        {% endif %}
    </div>

    <a href="archive.html"
        class="block mt-6 text-center text-sm text-primary-600 font-bold hover:text-primary-700 no-underline bg-surface-50 py-3 rounded-xl">
        ğŸ“š ì „ì²´ ì•„ì¹´ì´ë¸Œ(ê³¼ê±° ê¸°ë¡) ë³´ê¸° â†’
    </a>
</div>
{% endif %}

{% endblock %}